<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>長岡キンパ専用パチンコ攻略CH</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header>
<h1>長岡キンパ専用パチンコ攻略CH</h1>
</header>

<main>
  <section> 
    <h2>パチンコとは</h2> 
    <p>早い！（金がなくなるのが）</p> 
    <p>安い！（早めに当てれば）</p> 
    <p>美味い！（当たれば）</p> 
    <p>と、３拍子揃った最高の娯楽です。</p> 
  </section>
<section>
<h2>おすすめ機種検索</h2>
<input type="text" id="searchInput" placeholder="アイテム名で検索">
<select id="probabilityFilter">
  <option value="all">全ての確率</option>
  <option value="low">ミドル（1/319.7～）</option>
  <option value="medium">ライトミドル（1/100～1/300）</option>
  <option value="high">甘デジ（1/99以下）</option>
</select>
<div id="results"></div>
</section>
</main>

<footer>
<p>作成日：2025/9/08</p>
</footer>

<script>
// JSONデータ読み込み
let items = [];
fetch('items.json')
  .then(res => res.json())
  .then(data => {
    items = data;
    renderResults(items);
  });

// 画像表示切替
function toggleSkill(element) {
  const imgBox = element.querySelector(".skill-img");
  imgBox.style.display = (imgBox.style.display === "block") ? "none" : "block";
}

// 検索＆フィルター表示
const searchInput = document.getElementById("searchInput");
const probabilityFilter = document.getElementById("probabilityFilter");
const resultsDiv = document.getElementById("results");

function renderResults(filteredItems) {
  resultsDiv.innerHTML = "";
  if (filteredItems.length === 0) {
    resultsDiv.innerHTML = "<p>該当するアイテムはありません</p>";
    return;
  }
  filteredItems.forEach(item => {
    const div = document.createElement("div");
    div.className = "skill-box";
    div.onclick = function() { toggleSkill(div); };
    div.innerHTML = `
      <h3>${item.name}</h3>
      <p>${item.description}<br>確率: 1/${item.probability}</p>
      <div class="skill-img"><img src="${item.image}" alt="${item.name}"></div>
    `;
    resultsDiv.appendChild(div);
  });
}

function filterItems() {
  const keyword = searchInput.value.toLowerCase();
  let filtered = items.filter(item => item.name.toLowerCase().includes(keyword));

  const probValue = probabilityFilter.value;
  if (probValue !== "all") {
    filtered = filtered.filter(item => {
      if (probValue === "low") return item.probability > 99;
      if (probValue === "medium") return item.probability >= 100 && item.probability <= 300;
      if (probValue === "high") return item.probability < 301;
    });
  }
  renderResults(filtered);
}

searchInput.addEventListener("input", filterItems);
probabilityFilter.addEventListener("change", filterItems);
</script>

</body>
</html>
